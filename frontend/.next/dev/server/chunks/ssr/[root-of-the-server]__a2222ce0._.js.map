{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\n// import Link from 'next/link'; // Ïò§Î•ò Î∞©ÏßÄÎ•º ÏúÑÌï¥ Ï†úÍ±∞\nimport axios from 'axios';\n// import { useRouter } from 'next/navigation'; // Ïò§Î•ò Î∞©ÏßÄÎ•º ÏúÑÌï¥ Ï†úÍ±∞\n\n// --- TYPE DEFINITIONS ---\ninterface User {\n  id: string;\n  name: string;\n  role: 'GUEST' | 'HOST';\n}\n\ninterface Reservation {\n  id: string;\n  startDate: string;\n  endDate: string;\n  totalPrice: number;\n  status: 'PENDING' | 'CONFIRMED' | 'CANCELLED';\n  caravan: { name: string };\n  guest: { name: string };\n}\n\n// --- STATUS BADGE COMPONENT ---\nconst StatusBadge = ({ status }: { status: Reservation['status'] }) => {\n  const styles = {\n    PENDING: 'bg-yellow-100 text-yellow-800',\n    CONFIRMED: 'bg-green-100 text-green-800',\n    CANCELLED: 'bg-red-100 text-red-800',\n  };\n  const text = {\n    PENDING: 'ÎåÄÍ∏∞Ï§ë',\n    CONFIRMED: 'ÏäπÏù∏Îê®',\n    CANCELLED: 'Í±∞Ï†à/Ï∑®ÏÜåÎê®',\n  };\n  return (\n    <span className={`px-3 py-1 text-xs font-semibold rounded-full ${styles[status]}`}>\n      {text[status]}\n    </span>\n  );\n};\n\n// --- GUEST LANDING PAGE (Design Upgraded) ---\nconst GuestLandingPage = () => (\n  <main className=\"relative flex min-h-[calc(100vh-64px)] flex-col items-center justify-center overflow-hidden\">\n    {/* Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ Î∞è Í∑∏ÎùºÎç∞Ïù¥ÏÖò Ïò§Î≤ÑÎ†àÏù¥ */}\n    <div className=\"absolute inset-0 z-0\">\n      <img \n        src=\"https://images.unsplash.com/photo-1523987355523-c7b5b0dd90a7?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D\" \n        alt=\"Caravan Adventure\" \n        className=\"w-full h-full object-cover opacity-60\"\n      />\n      <div className=\"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/80\"></div>\n    </div>\n\n    {/* Î©îÏù∏ ÏΩòÌÖêÏ∏† */}\n    <div className=\"relative z-10 text-center space-y-8 max-w-5xl px-6 animate-fade-in-up\">\n      <h1 className=\"text-5xl md:text-7xl font-extrabold text-white tracking-tight leading-tight drop-shadow-2xl\">\n        Find Your Next <br />\n        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400\">\n          Adventure on Wheels\n        </span>\n      </h1>\n      \n      <p className=\"text-lg md:text-2xl text-gray-200 leading-relaxed mx-auto max-w-3xl font-light drop-shadow-md\">\n        Ï†Ñ ÏÑ∏Í≥ÑÏùò ÎØøÏùÑ Ïàò ÏûàÎäî Ìò∏Ïä§Ìä∏Í∞Ä Ï†úÍ≥µÌïòÎäî ÎèÖÌäπÌïú Ïπ¥ÎùºÎ∞òÏùÑ ÎßåÎÇòÎ≥¥ÏÑ∏Ïöî.<br className=\"hidden md:block\"/> \n        ÎãπÏã†ÎßåÏùò ÌäπÎ≥ÑÌïú Ïó¨ÌñâÏù¥ Í∏∞Îã§Î¶¨Í≥† ÏûàÏäµÎãàÎã§.\n      </p>\n      \n      <div className=\"pt-10 flex justify-center gap-4\">\n        <a \n          href=\"/caravans\" \n          className=\"inline-block bg-indigo-600 text-white px-10 py-4 rounded-full text-xl font-bold shadow-lg hover:bg-indigo-700 hover:scale-105 transition-all duration-300 ease-in-out hover:shadow-2xl backdrop-blur-sm bg-opacity-90 border border-indigo-500/30\"\n        >\n          Explore Caravans ‚ûú\n        </a>\n      </div>\n    </div>\n\n    {/* ÌïòÎã® Ïû•Ïãù ÏöîÏÜå */}\n    <div className=\"absolute bottom-10 left-0 right-0 flex justify-center z-10 animate-bounce\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-white opacity-70\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n      </svg>\n    </div>\n  </main>\n);\n\n// --- HOST DASHBOARD ---\nconst HostDashboard = ({ user }: { user: User }) => {\n  const [reservations, setReservations] = useState<Reservation[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // useRouter() ÎåÄÏã† window.location ÏÇ¨Ïö©\n  const navigate = (path: string) => {\n    if (typeof window !== 'undefined') {\n      window.location.href = `${window.location.origin}${path}`;\n    }\n  };\n\n  const fetchReservations = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`http://127.0.0.1:3001/api/reservations/host/${user.id}`);\n      setReservations(response.data);\n    } catch (error) {\n      console.error(\"Failed to fetch reservations\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (user.id) {\n      fetchReservations();\n    }\n  }, [user.id]);\n\n  const handleUpdateStatus = async (id: string, status: 'CONFIRMED' | 'CANCELLED') => {\n    try {\n      await axios.patch(`http://127.0.0.1:3001/api/reservations/${id}/status`, { status });\n      alert(`ÏòàÏïΩÏù¥ ${status === 'CONFIRMED' ? 'ÏäπÏù∏' : 'Í±∞Ï†à'}ÎêòÏóàÏäµÎãàÎã§.`);\n      fetchReservations(); // Refresh the list\n    } catch (error) {\n      console.error(\"Failed to update reservation status\", error);\n      alert('Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('ko-KR', { year: 'numeric', month: 'numeric', day: 'numeric' });\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">\n          ÏïàÎÖïÌïòÏÑ∏Ïöî, {user.name} Ìò∏Ïä§Ìä∏Îãò! üëã\n        </h1>\n        <button \n          onClick={() => navigate('/caravans/new')}\n          className=\"bg-indigo-600 text-white px-5 py-2.5 rounded-lg font-bold hover:bg-indigo-700 transition shadow-sm\"\n        >\n          + ÏÉà Ïπ¥ÎùºÎ∞ò Îì±Î°ù\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\n        <div className=\"px-6 py-4 border-b bg-gray-50\">\n          <h2 className=\"text-lg font-semibold text-gray-700\">ÎÇ¥ Ïπ¥ÎùºÎ∞ò ÏòàÏïΩ ÏöîÏ≤≠ Î™©Î°ù</h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-12 text-center text-gray-500\">ÏòàÏïΩ Î™©Î°ùÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...</div>\n        ) : reservations.length === 0 ? (\n          <div className=\"p-12 text-center text-gray-500\">ÏïÑÏßÅ Îì§Ïñ¥Ïò® ÏòàÏïΩ ÏöîÏ≤≠Ïù¥ ÏóÜÏäµÎãàÎã§.</div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm text-left text-gray-500\">\n              <thead className=\"text-xs text-gray-700 uppercase bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3\">Ïπ¥ÎùºÎ∞ò / Í≤åÏä§Ìä∏</th>\n                  <th className=\"px-6 py-3\">ÏùºÏ†ï</th>\n                  <th className=\"px-6 py-3\">Í∏àÏï°</th>\n                  <th className=\"px-6 py-3\">ÏÉÅÌÉú</th>\n                  <th className=\"px-6 py-3 text-right\">Í¥ÄÎ¶¨</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {reservations.map(res => (\n                  <tr key={res.id} className=\"bg-white hover:bg-gray-50 transition-colors\">\n                    <td className=\"px-6 py-4 font-medium text-gray-900\">{res.caravan.name}</td>\n                    <td className=\"px-6 py-4\">{res.guest.name}</td>\n                    <td className=\"px-6 py-4\">{formatDate(res.startDate)} - {formatDate(res.endDate)}</td>\n                    <td className=\"px-6 py-4 font-bold text-indigo-600\">‚Ç©{res.totalPrice.toLocaleString()}</td>\n                    <td className=\"px-6 py-4\"><StatusBadge status={res.status} /></td>\n                    <td className=\"px-6 py-4 text-right\">\n                      {res.status === 'PENDING' && (\n                        <div className=\"flex justify-end gap-2\">\n                          <button \n                            onClick={() => handleUpdateStatus(res.id, 'CONFIRMED')} \n                            className=\"text-green-600 hover:text-green-800 font-medium border border-green-200 px-3 py-1 rounded hover:bg-green-50 transition-colors\"\n                          >\n                            ÏäπÏù∏\n                          </button>\n                          <button \n                            onClick={() => handleUpdateStatus(res.id, 'CANCELLED')} \n                            className=\"text-red-600 hover:text-red-800 font-medium border border-red-200 px-3 py-1 rounded hover:bg-red-50 transition-colors\"\n                          >\n                            Í±∞Ï†à\n                          </button>\n                        </div>\n                      )}\n                      {res.status === 'CONFIRMED' && (\n                         <button \n                           onClick={() => handleUpdateStatus(res.id, 'CANCELLED')} \n                           className=\"text-gray-400 hover:text-red-600 text-xs underline\"\n                         >\n                           Ï∑®ÏÜåÌïòÍ∏∞\n                         </button>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// --- MAIN HOME PAGE (Controller) ---\nexport default function HomePage() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      try {\n        setUser(JSON.parse(storedUser));\n      } catch (e) {\n        console.error(\"Failed to parse user data\", e);\n      }\n    }\n    setLoading(false);\n  }, []);\n\n  if (loading) {\n    return <div className=\"min-h-screen flex items-center justify-center text-gray-500\">Î°úÎî© Ï§ë...</div>;\n  }\n\n  if (user && user.role === 'HOST') {\n    return <HostDashboard user={user} />;\n  }\n\n  return <GuestLandingPage />;\n}"],"names":[],"mappings":"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"}}]
}