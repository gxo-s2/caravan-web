{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/src/app/caravans/edit/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, use } from 'react'; // 'use' 추가됨 (Next.js 15 필수)\nimport { useRouter } from 'next/navigation'; \n\n// API URL 환경 변수 처리\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api';\n\n// Next.js 15부터 params는 Promise입니다.\ntype EditCaravanPageProps = {\n  params: Promise<{ id: string }>;\n};\n\nexport default function EditCaravanPage({ params }: EditCaravanPageProps) {\n  // 1. Next.js 15 해결: use() 훅을 사용해 params의 포장을 풉니다.\n  const { id } = use(params);\n  \n  const router = useRouter();\n  \n  // 2. TypeScript 오류 해결: <any>를 사용하여 임시로 타입 검사를 우회합니다.\n  // (나중에 types/caravan.ts 파일에 capacity 등을 정식으로 추가하면 <any>를 지우셔도 됩니다)\n  const [caravan, setCaravan] = useState<any>({\n    name: '',\n    location: '',\n    pricePerDay: 0,\n    description: '',\n    capacity: 0,\n    images: [],\n  });\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!id) return;\n\n    const fetchCaravanData = async () => {\n      try {\n        setLoading(true);\n        // 백엔드 API 호출\n        const response = await fetch(`${API_URL}/caravans/${id}`);\n        \n        if (!response.ok) {\n          throw new Error('카라반 정보를 불러오는 데 실패했습니다.');\n        }\n        \n        const data = await response.json();\n        \n        setCaravan({\n            ...data,\n            pricePerDay: data.pricePerDay || 0, \n            capacity: data.capacity || 0,\n            // images가 null일 경우 빈 배열로 처리\n            images: data.images || []\n        });\n      } catch (err: any) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCaravanData();\n  }, [id]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    // pricePerDay와 capacity는 숫자 타입으로 변환\n    const isNumericField = name === 'pricePerDay' || name === 'capacity';\n    \n    setCaravan((prev: any) => ({\n      ...prev,\n      [name]: isNumericField ? Number(value) : value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!id) return;\n\n    try {\n      const response = await fetch(`${API_URL}/caravans/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(caravan),\n      });\n\n      if (!response.ok) {\n        throw new Error('카라반 정보 수정에 실패했습니다.');\n      }\n      \n      alert('카라반 정보가 성공적으로 수정되었습니다.');\n      // 수정 완료 후 목록 페이지로 이동\n      router.push('http://localhost:3000/host/caravans/manage'); \n      router.refresh(); \n    } catch (err: any) {\n      setError(err.message);\n      alert(err.message);\n    }\n  };\n  \n  if (loading) return <div>로딩 중...</div>;\n  if (error) return <div>에러: {error}</div>;\n\n  return (\n    <div className=\"container mx-auto p-4 max-w-2xl\">\n      <h1 className=\"text-2xl font-bold mb-6\">카라반 정보 수정</h1>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">이름</label>\n          <input\n            type=\"text\"\n            id=\"name\"\n            name=\"name\"\n            value={caravan.name || ''}\n            onChange={handleChange}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"location\" className=\"block text-sm font-medium text-gray-700\">지역</label>\n          <input\n            type=\"text\"\n            id=\"location\"\n            name=\"location\"\n            value={caravan.location || ''}\n            onChange={handleChange}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"pricePerDay\" className=\"block text-sm font-medium text-gray-700\">일일 가격 (원)</label>\n          <input\n            type=\"number\"\n            id=\"pricePerDay\"\n            name=\"pricePerDay\"\n            value={caravan.pricePerDay || 0}\n            onChange={handleChange}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"capacity\" className=\"block text-sm font-medium text-gray-700\">수용 인원</label>\n          <input\n            type=\"number\"\n            id=\"capacity\"\n            name=\"capacity\"\n            value={caravan.capacity || 0}\n            onChange={handleChange}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">설명</label>\n          <textarea\n            id=\"description\"\n            name=\"description\"\n            rows={4}\n            value={caravan.description || ''}\n            onChange={handleChange}\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm font-medium text-gray-700\">이미지</label>\n          {/* 배열인지 확인하고 join 사용 */}\n          <p className=\"text-sm text-gray-500\">\n             {Array.isArray(caravan.images) ? caravan.images.join(', ') : '이미지 없음'}\n          </p>\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n        >\n          수정 완료\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 341, "column": 0}, "map": {"version":3,"sources":["file:///home/snoo/caravan-app/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}